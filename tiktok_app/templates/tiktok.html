<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Scrape Hashtag TikTok</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script>
        function startScraping() {
            document.getElementById("loading").style.display = "block";
            document.getElementById("timer").innerText = "0";
            let seconds = 0;
            window.timerInterval = setInterval(() => {
                seconds++;
                document.getElementById("timer").innerText = seconds;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(window.timerInterval);
        }
    </script>
</head>
<body class="bg-light">
    <div class="container mt-5">
        <a href="/" style="display:block; margin-bottom:20px;">‚¨ÖÔ∏è Quay l·∫°i trang ch·ªß</a>

        <h1 class="text-center">TikTok Hashtag Scraper</h1>
        <form action="/tiktok/scrape" method="post" onsubmit="startScraping();">
            <div class="form-group">
                <label for="hashtag">Nh·∫≠p Hashtag (kh√¥ng c·∫ßn d·∫•u #):</label>
                <input type="text" class="form-control" id="hashtag" name="hashtag" placeholder="V√≠ d·ª•: campingsaigon" required>
            </div>
            <button type="submit" class="btn btn-primary">B·∫Øt ƒë·∫ßu c√†o</button>
        </form>

        <!-- Hi·ªÉn th·ªã ƒëang x·ª≠ l√Ω -->
        <div id="loading" style="display:none;" class="text-center mt-4">
            <div class="spinner-border text-primary" role="status"></div>
            <p>‚è≥ ƒêang x·ª≠ l√Ω... Th·ªùi gian ƒë√£ tr√¥i qua: <span id="timer">0</span> gi√¢y</p>
        </div>

        {% if download_link %}
            <div class="alert alert-success mt-4">
                ‚úÖ Ho√†n t·∫•t c√†o d·ªØ li·ªáu TikTok!
            </div>
            <p><a class="btn btn-success" href="{{ download_link }}" download>üì• T·∫£i file k·∫øt qu·∫£ CSV</a></p>
            <script>stopTimer();</script>
        {% endif %}
    </div>
</body>
</html>
